# AZ900

FFS missed the first 90 mins :(

[https://docs.microsoft.com/en-gb/learn/paths/azure-fundamentals/](Learn Azure Fundamenals)

[https://www.pluralsight.com/partners/microsoft/azure](PS) specifically [https://app.pluralsight.com/paths/certificate/microsoft-azure-fundamentals-az-900][AZ900 not free]

You can find all information from today/tomorrow on our learning path at aka.ms/azfunpath

if not message about free voucher [https://aka.ms/wheresmyvoucher] - valid for 3 months

## Az-900 4 parts [aka.ms/azfunpath](Azure Path)

+ Explore Microsoft Azure cloud concepts (AZ-900)
+ Distinguish Microsoft Azure Core Services (AZ-900)
+ Examine Microsoft Azure security, privacy, compliance, and trust (AZ-900)
+ Review Microsoft Azure pricing, service level agreements, and lifecycles (AZ-900)

## Explore Microsoft Azure cloud concepts

Typical Cloud Provider Services:

+ Compute power - such as Linux servers or web applications. VMs,Containers ,Serverlesss
+ Storage - such as files and databases.
+ Networking - such as secure connections between the cloud provider and your company.
+ Analytics - such as visualizing telemetry and performance data.

Cloud service Characteristics

High availability, Scalability (up or out), Elasticity (esentially automatic scalabilty), Agility (speed), Fault tolerance (auto replace bad instance), Disaster recovery, Global reach, Security.

### Distinguish types of cloud models: Public Cloud, Private Cloud, and Hybrid Cloud

A cloud deployment model defines where your data is stored and how your customers interact with it

A public cloud is owned by the cloud services provider (also known as a hosting provider). It provides resources and services to multiple organizations and users

A private cloud is owned and operated by the organization that uses the resources from that cloud. They create a cloud environment in their own datacenter and provide self-service access to compute resources to users within their organization. The organization remains the owner, entirely responsible for the operation of the services they provide.

A hybrid cloud combines both public and private clouds eg: hosting a website in the public cloud and linking it to a highly secure database hosted in a private cloud.

### Explore types of cloud services: IaaS, SaaS, and PaaS (Infrastructure, Software, Platform)

The shared responsibility model ensures cloud workloads are run securely and in a well-managed way. Depending on the service you are using, the cloud provider is responsible for some aspects of the workload management, and the customer or end user is responsible for other aspects of the workload management, and in some cases, both share a responsibility.

+ IaaS requires the most user management of all the cloud services. The user is responsible for managing the operating systems, data, and applications.
rent IT infrastructure servers and virtual machines (VMs), storage, networks, and operating systems from a cloud provider on a pay-as-you-go basis.
+ PaaS requires less user management. The cloud provider manages the operating systems, and the user is responsible for the applications and data they run and store.
PaaS is a complete development and deployment environment in the cloud
+ SaaS requires the least amount of management. The cloud provider is responsible for managing everything, and the end user just uses the software. Gmail etc.

[https://docs.microsoft.com/en-gb/learn/wwl-azure/explore-types-cloud-services/media/shared-responsibility.png](diagram)

## Distinguish Microsoft Azure Core Services (AZ-900)

### Regions, sets, zones, groups

Region is a geographical area on the planet containing at least one, datacenter. Region pairs are at least 300 miles away from each other.
The azure geographies are Americas, Europe, Asia Pacific, Middle East and Africa

__Availability sets__ are made up of Update domains (UD) and Fault domains (FD).

Update domains. When a maintenance event occurs (such as a performance update or critical security patch applied to the host), the update is sequenced through update domains

Fault domains provide for the physical separation of your workload across different hardware in the datacenter (isolating against a hardware fail)

__Availability zones__ (are primarily for VMs, managed disks, load balancers, and SQL databases) are physically separate locations within an Azure region that use availability sets to provide additional fault tolerance.
Use zones to  run mission-critical applications and build high-availability into your application architecture by co-locating your compute, storage, networking, and data resources within a zone and replicating in other zones.
Zones are specific connections of geographies to allow for fail-over support and backup of mission critical data.

__Resource groups__ are a unit of management for your resources in Azure. You can think of your resource group as a container. Logical grouping.

Resource group level resource include: Metering and billing
, Policies
, Monitoring and alerts
, Quotas
, Access control ( role-based access control (RBAC) permissions)

Each resouce can only be in 1 resource group. 
A resource group can contain resources that reside in different regions.

tip@ have a naming scheme: `msftlearn-core-infrastructure-rg` some indication of what it's used for (msftlearn), the types of resources contained within (core-infrastructure), and the type of resource it is itself (rg).

### Azure Resource Manager

 is a management layer in which resource groups and all the resources within it are created, deployed, configured, managed (auth, roles, policies) and deleted.

 ARM templates are JSON

### Define core Azure services and products

+ Compute services such as VMs and containers that can run your applications
+ Database services that provide both relational and NoSQL choices
+ Identity services that help you authenticate and protect your users
+ Networking services that connect your datacenter to the cloud, provide high availability or host your DNS domain
+ Storage solutions that can accommodate massive amounts of both structured and unstructured data
+ AI and machine-learning services can analyze data, text, images, comprehend speech, and make predictions using data
+ And many more!

#### Azure compute (Vms,Containers, App Services etc)

 is an on-demand computing service for running cloud-based applications. It provides computing resources such as disks, processors, memory, networking and operating systems.

##### Virtual Machines (IaaS)

Vm's are Compute Services.

/24 = 255.255.255.0 CIDR notation (not this exam)

 New vm wizard walkthrough:

AutoShutDown - when not being used. Does not include Auto turn back on!

Extensions: add stuff to base vm
eg:

+ install anti-virus
+ Customer Script Extension - now run my custom script as part of the install

'Download a template for automation' - can be used to recreate this vm, minus it's uniqueness (name etc). Is a JSON file.

Bastion service - VM has no public access, only the bastion. Problem was VM public rdp port had to be open to allow remote access = massive security risk.

##### Virtual Machine Services

+ Azure VMs
+ VM Scalessets - are an Azure compute resource that you can use to deploy and manage a set of identical VMs. + elastic scale out and in.
+ App services - PaaS
+ Functions

##### Containers

Containers are a virtualization environment.

"Containers don't care what ship they on" - plus much more lightweight. Orchestrator moves the containers from ship to ship = Kubernetes (captain in greek).

To run multiple instances of an application on a single host machine, containers are an excellent choice. The container orchestrator can start, stop, and scale out application instances as needed.

There are two ways to manage both Docker and Microsoft-based containers in Azure.

+ Azure Container Instances - fast, simple - dont have to manage any virtual machines or adopt any additional services. PaaS
+ Azure Kubernetes Service -  orchestration service for containers with distributed architectures and large volumes of containers

_You can move existing applications to containers and run them within AKS. You can control access via integration with Azure Active Directory (Azure AD) and access Service Level Agreement (SLA)–backed Azure services, such as Azure Database for MySQL for any data needs, via Open Service Broker for Azure (OSBA)._

Az portal lab summary:

+ Az portal > All services> Container instances > Add
+ Fill config details for container, eg: Image = microsoft/aci-helloworld
+ Fill Networking tab > DNS name label = {something unique}.  publicly reachable at {note dns-name-label}.region.azurecontainer.io
+ Fill in Sandbox from this point forward Click Review and Create to start the automatic validation process. Click CREATE
+ After the deployment is complete, click the Go to resource link the deployment blad
+ Locate the Fully Qualified Domain Name (FQDN) (or container IP) and paste into browser. Should see app running. SIMPLES!!

### Azure Network Services

+ Azure Virtual Network -  enables many types of  resources such as Azure VMs to securely communicate with each other, the internet, and on-premises networks.
A virtual network is scoped to a single region
+ Azure Load Balancer - can provide scale for your applications and create high availability for your service
+ VPN gateway - is a specific type of virtual network gateway that is used to send encrypted traffic between an Azure Virtual Network and an on-premises location over the public internet.
+ Az Application Gateway + firewall - is a web traffic load balancer that enables you to manage traffic to your web applications.
It is the connection through which users connect to your application. With Application Gateway you can route traffic based on source IP address and port to a destination IP address and port. You also can help protect a web application with a web application firewall, redirection, session affinity
+ CDN - to minimize latency
+ Peering - connect virtual networks together in Az. vnet1 peer to vnet2. No encryption.
+ VNET peering - has additional security. Most peeeps do not need this. Goverments do.

Azure Virtual Network lab:

+ All Services > Virtual Networks > Add
+ fill and create.. call the AVN 'vnet1'
+ All Services > Virtual Machine > Add
+ fill and create for two machines. IN the networking tab for each make sure Virtual network = 'vnet1'
+ RDP into first of the VMs, in powershell `> ping vm2` (where vm2 is the name of the other vm) - will actually show 'Request timed out' as locked down
+ RDP into vm2, powershell `> New-NetFirewallRule –DisplayName “Allow ICMPv4-In” –Protocol ICMPv4`. The ping from vm1 should now work. 

Connect on-prem to Az

+ point to site - vpn client to az virtual network. public internet but encrypted.
+ site to site vpn - az is a branch off the office network. public internet but encrypted.
+ express route - private connection to Az and oFfice. Dedicated (physical) line. Expensive!

### Data categories in Azure

+ structured  - relation dbs
+ semi-structured no-sql. Cosmos.
+ unstructured - blob: pdfs, videos, emails

### Storage

exam tip: SMB `machine\\folder` format for accessing files.

Azure storage service types include:

+ disks (for virtual machines, applications, and other services to access and use as they need, similar to how they would in on-premises scenarios). A VHD.
+ files (highly available network file shares that can be accessed by using the standard Server Message Block (SMB) protocol (or REST or libraries))
multiple VMs can share the same files with both read and write access. Also URL+SAS token
+ objects
+ queues - messages up to 64 KB in size
+ tables -  stores large amounts of structured data. The service is a NoSQL datastore which accepts authenticated calls from inside and outside the Azure cloud. Azure tables are ideal for storing structured, non-relational data. Good for storing datasets that don't require complex joins, foreign keys, or stored procedures and can be denormalized for fast access; good for quickly querying data using a clustered index.

+ Locally Redundant storage (LRS):
+ Zone ZRS:
+ Geo GRS, RA-GRS:

Globally unique storage account names as used as publuc urls.

### Explore Azure database services (PaaS)

+ Cosmos - a globally distributed database service. Elastic.
+ Azure SQL - PaaS / DaaS (don't have to have a VM with SQL on top)
+ Az Database Migration (on-prem to db services)

### Explore Azure Marketplace

connects end users with solutions from MD, ISVs

## Identify Azure solutions

### IoT

+ IoT central - basic SaaS service. 1 directional - so monitoring etc.
+ IoT hub - bi-directional with the devices

Demo Lab Summary;

+ All services > IOT hub > Create ... IOT Hub Name
+ Size/Scale and Create
+ Find  created hub > Explorers > Iot devices > New ... name = myRaspPi ... Save
+ From the menu copy Primary Connection String
+ go to the [https://azure-samples.github.io/raspberry-pi-web-simulator/#Getstarted?azure-portal=true](Raspberry Pi Simulator) and whack in the connStr
+ Choose > Run. The (fake) sensor data will be sent to the cloud.

### Big Data (was Data warehouse, now Azure Synapse Analytics)

+ Azure Synapse Analytics - enterprise data warehousing and big data analytics.
+ HD Insight - open-source analytics service for enterprises. Used to run OS stuff like Apache Spark
+ Az Data Lake Analytics - an on-demand analytics job service

SQL just runs through all the rows to produce a result - with massive data that's too slow.

### AI / Machine Learning

Azure Cognitive Services - collection of domain-specific pre-trained AI models that can be customized with your data.
Vision, speech, language, knowledge, Search

+ AZ ML service (for data scientists)
+ AZ Machine Learning Studio (for normal users). no code.

### Serverless

Scaling and performance are handled automatically

+ Functions: event triggered - 1 event in, 1 event out. harges accrue only when a function is triggered.
+ Az logic Apps: need to make decision. Workflows. helps you automate and orchestrate tasks, business processes, and workflows when you need to integrate apps, data, systems, and services across enterprises or organizations.
+ Event Grid: easily build applications with event-based architectures. single point in, multiple things happen through routeing? (triggers multiple events)

### Dev Ops Services (was VSTS)

Collaborate on code. Brings together devs and ops.

+ pipelines
+ git repo
+ kanbab board
+ load test

Azure Lab Services is a service that helps developers and testers quickly create environments in Azure, while minimizing waste and controlling cost. Users can test their latest application versions by quickly provisioning Windows and Linux environments using reusable templates and artifacts. You can easily integrate your deployment pipeline with DevTest Labs to provision on-demand environments. With DevTest Labs you can scale up your load testing by provisioning multiple test agents and create pre-provisioned environments for training and demos. Lab Services was formerly known as DevOps Test.

### Azure App Service (PaaS: Web Apps, Mobile Apps, API Apps, and Logic App)

 you know this!

### Management Tools

ARM Azure Resource Manager. Templates

+ Az Portal
+ Az PowerShell - Learn for exam. `get-command` will be in test. `get-help update-azvm` = commandlets verb-action.
+ Az CLI - begins with `az` command. Learn for exam - not as full featured (yet) as PS.
+ Az Cloud Shell - in portal it's the PowerShell icon: brings up a shell. `> az` brings up help. eg: `> az group create --help`. "browser based scripting environment"
+ Az (Mobile) App - when you're on the go
+ Az REST API

Learn these for repeatability. PS and CLI.

In exam tasks they don't care if it's portal or PS as long as you get it down.

Lab: Create a Vm with an ARM template

+ see [https://azure.microsoft.com/en-gb/resources/templates/101-vm-simple-windows/]{template: Deploy a simple Windows VM}
+ click [Deplo to Azure] on ^^.#
+ Edit Template > whack in details. Purchase
+ All Services > virtual machines > confirm it's there.

Lab: Create a Vm with an ARM template

+ Verify your new resource group: `> Get-AzResourceGroup | Format-List`
+ Create a virtual machine.

```bash
New-AzVm `
-ResourceGroupName "[sandbox resource group name]" `
-Name "myVMPS" `
-Location "West US" `
-VirtualNetworkName "myVnetPS" `
-SubnetName "mySubnetPS" `
-SecurityGroupName "myNSGPS" `
-PublicIpAddressName "myPublicIpPS"
```

+ confirm it's there

## Examine Microsoft Azure security, privacy, compliance, and trust (AZ-900)

AZ-500 = the 5 day version of this 1 hour.

### Defense in depth

A layered approach to security. At every layer. Attackers are usually after Data.

Layers:
Physical security,
Identity & access to change control,
(Network) Perimeter (Firewalls, Ddos protection),
Networking layer ("in the system" limit communication between resources / Deny by default),
Compute layer (secures access to virtual machines: endpoint protection, keep patched),
Application layer (Store sensitive application secrets in a secure storage medium),
Data Layer.

+ Confidentiality - The Principle of least privileg
+ Integrity - The prevention of unauthorized changes to information at rest or in transit.
+ Availability - Ensure services are available to authorized users.

### Shared security

Security of the operational environment is now a concern shared by both cloud providers and customers.

### Azure Firewall

is a managed, cloud-based, network security service that protects your Azure Virtual Network resources. It is a fully stateful firewall as a service with built-in high availability and unrestricted cloud scalability.
Uses a static public IP address for your virtual network resources, which allows outside firewalls to identify traffic originating from your virtual network. The service is fully integrated with Azure Monitor for logging and analytics. Inbound and outbound filtering rules.

Firewalls on the perimeter. DDoS protection built into Az. Basic service tier is free.

Tpically deploy Azure Firewall on a central virtual network to control general network access. Can configure:

+ Application rules that define fully qualified domain names (FQDNs) that can be accessed from a subnet.
+ Network rules that define source address, protocol, destination port, and destination address.

Azure Application Gateway also provides a firewall, called the Web Application Firewall (WAF). WAF provides centralized, inbound protection for your web applications against common exploits and vulnerabilities.

### Network Security Groups

Inside the network, NSG Network Security Groups are a filter that checks "who are you" and "where are you going" from _inside the network_.

A named group would have a priority, source | destination, protocol, port, direction (in/outbound), action (allow/deny)

Network Watcher tool in Az portal > Effective Security Rules, Generates toppology diagrams, IP flow verify (ping at Azure level), Next hop (trace route)

### Application Security Groups

Application Secururity Groups (ASGs) - group virtual machines and define network security policies based on those groups. (by name, without IP hassle)

[https://docs.microsoft.com/en-gb/learn/wwl-azure/secure-network-connectivity/media/application-security-group-1.png](ASG example diagram)

Inbound Security Rules - can lock down inbound access. Rules are priority based (like routes)

### Azure Active Directory

Authentication (AuthN - id, via AD) vs Authorization (AuthZ - permission and claims, RBAC Role Based Access Control)

Azure AD very different from AD (uses LDAP, Kerberos, no federation)

+ External resources might include Microsoft 365, the Azure portal, and thousands of other software as a service (SaaS) applications.
+ Internal resources might include apps on your corporate network and intranet, along with any cloud apps developed by your own organization.

AzAD single sigon-on

AzMFA (something you know,posses,are)

### security tools and features

Azure Security center -  is a monitoring service that provides threat protection across all of your services both in Azure, and on-premises. 
Use Security Center for an incident response (detect/assess/diagnose).

+ Free. Available as part of your Azure subscription, this tier is limited to assessments and recommendations of Azure resources only.
+ Standard Subscription. provides a full suite of security-related services including continuous monitoring, threat detection (machine learning), just-in-time access control for ports, and more.

A __security policy__ defines the set of controls that are recommended for resources within that specified subscription or resource group. In Security Center, you define policies according to your company's security requirements.

### Azure Key Vault

Secrets, Keys, Certificates, Secrets backed by hardware security modules.

Centralized, Secure, Monitored. You can integrate Key Vault with storage accounts, container registries, event hubs and many more Azure services.

Accessed via APIs

### Azure Information Protection (AIP) = Labels

is a cloud-based solution that helps organizations classify and (optionally) protect its documents and emails by applying labels. Labels can be applied automatically (by administrators who define rules and conditions), manually (by users), or with a combination of both (where users are guided by recommendations).

 Office365 example, the administrator has configured a label with rules that detect sensitive data. When a user saves a Microsoft Word document containing a credit card number, a custom tooltip is displayed. The tooltip recommends labeling the file as Confidential/All Employees, which is a label that the administrator has configured. This label classifies the document and protects it.

### Azure Advanced Threat Protections (Azure ATP) - available as part of the Enterprise Mobility + Security 5 suite (EMS E5), and as a standalone license

Azure ATP has its own portal, through which you can monitor and respond to suspicious activity.
eg: speaker going to Hong Kong caused 2FA request as usually in USA. Azure ML behind the scenes.

### Azure Governance (big in all tests) = policies + initiatives, RBS

Use of policies to governn what a user can or cannot do in the way users create stuff within azure. eg: Must always be in West Europe Region, or no mega powerful instances

Create a policy definition > Assign the definition to resources (eg: an app, a resource group etc) > Review Results (is it compliant or not. Reevaluated once per hour)

A policy definition expresses what to evaluate and what action to take. For example, you could prevent VMs from being deployed if they are exposed to a public IP address.
[https://docs.microsoft.com/en-us/azure/governance/policy/samples/](See Azure polict samples page)

An initiative definition is a set of policy definitions

example: you could create an initiative named Enable Monitoring in Azure Security Center, with a goal to monitor all the available security recommendations in your Azure Security Center. Under this initiative, you would have the following policy definitions:

+ Monitor unencrypted SQL Database in Security Center – For monitoring unencrypted SQL databases and servers.
+ Monitor OS vulnerabilities in Security Center – For monitoring servers that do not satisfy the configured baseline.
+ Monitor missing Endpoint Protection in Security Center – For monitoring servers without an installed endpoint protection agent.

Like a policy assignment, an initiative assignment is an initiative definition assigned to a specific scope. Initiative assignments reduce the need to make several initiative definitions for each scope. This scope could also range from a management group to a resource group.

[https://docs.microsoft.com/en-gb/learn/modules/describe-azure-governance-methodologie/5-walkthrough-create-azure-policy](lab walkthrought create a policy to restrict deployment of Azure resources to a specific location.)

### Role-based access control (RBAC)

Fine-grained access managemenemt. Often user access at resource group level, can be as small as "Backup Reader" role.

Access control (IAM) > Role Assignments > User Access Admin > Add (setup permissions for a user)

### Resource Locks

eg: Cantdelete lock will block delete, even for admins, unless admin removes the lock.
eg: Cantchnage - cannot change any azure properties, but internal changes (like in a VM) still continue.

### Azure Blueprints

reusable environment definitions at a very high level.
enable cloud architects to define a repeatable set of Azure resources that implement and adhere to an organization's standards, patterns, and requirements. Azure Blueprint enables development teams to rapidly build and deploy new environments with the knowledge that they're building within organizational compliance with a set of built-in components that speed up development and delivery. ie a template for: roles, policies, ARM templates, resource groups etc 

### Subscription Governance

+ Billing
+ Acccess Control (A subscription is a deployment boundary for Azure resources). Each sub isolates
+ Subscription Limits

### Monitoring and reporting

#### Tags (key value pairs to create a taxonomy eg: Environment:Production)

+ useful for billing
+ provides metadata for Az resources

#### Azure Monitor

+ Activity Logs
+ Metrics
+ Az App Insights
+ Enable diagnostics

#### Azure Service Health

+ Az Status - global view of the health state of Azure services
+ Service Health - state of your Azure services. incl alerts eg: mssg if cpu > 90% etc
+ Az Resource Health - diagnose and obtain support when an Azure service issue affects your resources

#### Monitor applications and services

Application Insights is a service that monitors the availability, performance, and usage of your web applications, whether they're hosted in the cloud or on-premises. 

Azure Monitor for containers is a service that is designed to monitor the performance of container workloads, which are deployed to managed Kubernetes clusters hosted on Azure Kubernetes Service (AKS).

Azure Monitor for VMs is a service that monitors your Azure VMs at scale

Azure Advisor: analyzes deployed resources. Best practices.

### Privacy, Compliance (with standards like ISO etc) and data protection standards

search for 'azure __trust center__' for list of compliance certs.

Az Commercial (public env)
Az Government Service (separate instance of Azure!)
Az China (only vis 21Vianet)

The __Service Trust Portal (STP)__ hosts the Compliance Manager service, and is the Microsoft public site for publishing audit reports and other compliance-related information relevant to Microsoft’s cloud services.

__Compliance Manager__ is a workflow-based risk assessment dashboard within the Trust Portal that enables you to track, assign, and verify your organization's regulatory compliance activities related to Microsoft professional services and Microsoft cloud services such as Microsoft 365, Dynamics 365, and Azure.

## Review Microsoft Azure pricing, service level agreements, and lifecycles (AZ-900)

 An Azure subscription is a logical unit of Azure services that links to an Azure account, which is an identity in Azure Active Directory (Azure AD) or in a directory that an Azure AD trusts.

Management groups include multiple Az Subscriptions.
Az Subs include Resource Groups.
Resoure Groups inclide Resources.

In portal search for 'free services'. quite a few.

### Costs

When you provision an Azure resource, Azure creates one or more meter instances for that resource. The meters track the resources' usage, and each meter generates a usage record that is used to calculate your bill.

Zones affect billing (data xfer between)

+ Zone 1 – West US, East US, Canada West, West Europe, France Central and others
+ Zone 2 – Australia Central, Japan West, Central India, Korea South and others
+ Zone 3 - Brazil South
+ DE Zone 1 - Germany Central, Germany Northeast

Pricing Calculator.

Tests on billing always mentions reserved instances.
eg: least admin effort (easiest) - which has least steps
eg: which is the most cost effective - 

Hybrid benefit - can move MS liscense bought for on-prem and apply to Azure VM sub (saves a lot of money).

TCO calculator - real cost of 

support plans. in the exam - review support-plans table on website.

twitter @azure support. Az portal New support Request

Azure SLAs

define guaranteed uptime / performance. 99.99 = 4 nines.